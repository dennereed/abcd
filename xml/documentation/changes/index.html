<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>ABCD - ABCD 3.0 Changes</title>
    <link href="http://rs.tdwg.org/dwc/" rel="schema.DwC">
    <meta content="ABCD - 3.0 Changes" name="DC.title">
    <meta content="ABCD 3.0 Changes" name="DC.description">
    <meta content="biodiversity, standards" name="DC.subject">
    <meta content="ABCD 3.0 Project" name="DC.creator">
    <meta content="Fabian Reimeier (BGBM)" name="DC.contributor">
    <meta content="David FichtmÃ¼ller (BGBM)" name="DC.contributor">
    <meta content="" name="DC.dateAccepted">
    <meta content="" name="DC.replaces">
    <meta content="2019" name="DC.modified">
    <meta content="http://rs.tdwg.org/abcd" name="DC.identifier">
    <meta content="text/html" name="DC.format">
    <meta content="ABCD 3.0 Project Group" name="DC.publisher">
    <meta content="http://creativecommons.org/licenses/by/4.0/legalcode" name="DC.license">
    <meta content="public" name="DC.accessRights">
    <meta content="ABCD 3.0 Changes. 2019" name="DC.bibliographicCitation">
    <meta content="en" name="DC.language">
    <link href="http://www.tdwg.org/" rel="meta">
    <link type="text/css" rel="stylesheet" href="/assets/materialize/css/materialize.min.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="/assets/custom/css/abcd.css"  media="screen,projection"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body>
    <header id="navigation-app">
      <navigation title="ABCD 3.0 Changes"></navigation>
    </header>
    <main id="main-app">
      <div class="container v-pre">
        <div class="row">
          <div class="col s12 m10 offset-m1 xl8 offset-xl1">
            <div id="documentation-section" class="section">
              <div id="simplification" class="scrollsection">
                <h3>Simplification</h3>
                <p>Usage of common types, e.g. for Contacts or Dates. While this increases the number of possible elements in the XML tree it reduces the different elements and makes to usage more consistent.</p>
              </div>

              <div id="renamed" class="scrollsection">
                <h3>Elements renamed</h3>
                <p>More consistent naming of elements. Many elements used to repeat the name of the parent element. This has been heavily reduced to make the element names more concise. The same goes for repeatable elements, which are now more closer to convention of ElementInPlural/ElementInSigular. There are however still exceptions to these conventions.</p>
                <ul class="collection">
                  <li class="collection-item">ID, e.g. UnitID and DatsSetID</li>
                  <li class="collection-item">GUID, e.g. UnitGUID and DataSetGUID</li>
                  <li class="collection-item">Unit/EAnnotations was renamed to Unit/Annotations</li>
                  <li class="collection-item">Unit/Assemblages/UnitAssemblage was renamed to Unit/Assemblages/Assemblage</li>
                  <li class="collection-item">Comments to Notes</li>
                </ul>
              </div>

              <div id="common" class="scrollsection">
                <h3>Commonly used elements</h3>
              </div>

              <div id="spelling" class="scrollsection">
                <h3>Spelling</h3>
                <p>In ABCD 2.06 the name of elements were a mixture between American English and British English. To make this consistent and to align with other international initiatives, all element names are now spelled in American English.</p>
                <p>Words that were affected by these changes are:</p>
                <ul class="collection">
                  <li class="collection-item">Atomized</li>
                  <li class="collection-item">Organization</li>
                  <li class="collection-item">Paleontological</li>
                  <li class="collection-item">Mineralized</li>
                  <li class="collection-item">Dispatch</li>
                </ul>
              </div>

              <div id="contact" class="scrollsection">
                <h3>Contact</h3>
                <ul class="collection">
                  <li class="collection-item">DataSet/ContentContact and DataSet/TechnicalContact are now full contacts</li>
                  <li class="collection-item">Unit/Annotation/Annotator is now a full contact instead of just the name</li>
                  <li class="collection-item">The Concept of phone numbers has been simplified. Previously a phone number would have information about the device and usage notes attached to it, whereas now it is just the phone number</li>
                  <li class="collection-item">LogoURI was renamed to LogoURL and moved to the Organization instead of the contact in general</li>
                  <li class="collection-item">OrgUnits/OrgUnit was renamed to Divisions/Division</li>
                </ul>
              </div>

              <div id="legal" class="scrollsection">
                <h3>LegalStatements (previously known as IPRStatements)</h3>
                <p>One of the complaints about the previous ABCD version was the IRP (Intelectual Property Rights) block. It contained the subelements Acknowledgements, Citation, Copyrights, Disclaimers, IPRDeclarations, License and TermsOfUseStements. Even for experience users of ABCD it was difficult du distinguish between these kinds of statements.</p>
                <ul class="collection"> 
                  <li class="collection-item">The entire block was therefore simplified, starting by renaming IPRStatements to LegalStatements.</li>
                  <li class="collection-item">The elements Acknowledgements (referencing other works the current element is based upon or that were helpful in its creation or processing) and License remain unchanged.</li>
                  <li class="collection-item">Citations was renamed to SuggestedCitations, to make it clear that this should contain the way the current dataset or image should be cited by other publications or datasets that build upon it (as such a citation is usually subject to the citation guidelines of journals etc, the person citing it might now have full control over how it is cited, hence this is only a suggestion on which information to include.)</li>
              </div>

              <div id="urli" class="scrollsection">
                <h3>Differentiation between URI and URL</h3>
                <ul class="collection">
                  <li class="collection-item">In ABCD 2.06 a lot of element names had a URI at the end (e.g. MultiMediaObject/FileURI) even when it was clearly meant to be an URL. So with Version 3.0 there is a clear distinction between URIs for the purpose of identifying a concept and URLs which are links leading to the desired content. Quite often it is desired that URIs are also resolvable, however the main focus is for identification purposes.</li>
                  <li class="collection-item">Many elements now have the repeatable elements ReferenceURIs/ReferenceURI primarily meant for identifiers and many also have addition an addition WebsiteURL which to be presented as a clickable element to a human reader to get more information about this. Other Elements with URL at the end are used to indicate a distinct purpose, like DirectAccessURL (for downloading a dataset) , FileURL and ThumbnailURL (both for Multimedia elements), ProductURL (the website where a multimedia object is presented, with additional metadata and possibly an interactive viewer), LogoURL(Link to the Logo of the organization) etc. </li>
                </ul>
              </div>
              
              <div id="date" class="scrollsection">
                <h3>Date</h3>
                <ul class="collection">
                  <li class="collection-item">The elements DayNumberBegin and DayNumberEnd for Date elements have been removed. The elements were to mark dates in the Julian calendar, however they only had limited usability for automatically converting Julian dates to Gregorian dates. The recommendation is now to use the DateText element to note dates in the Julien Calendar.</li>
                </ul>
              </div>

              <div id="multimedia" class="scrollsection">
                <h3>MultimediaObject</h3>
                <ul class="collection">
                  <li class="collection-item">A lot of new elements have been introduced to the MultimediaObject in ABCD 2.1 which have been further refined for 3.0. The MultimediaObject now contains subelements for Audio, Image and Video for several specific information depending on the type of the media, as well as several other generic elements. It is now possible to note Taxa in the Background of an image and give references to the source of the image. </li>
                  <li class="collection-item">The previous element ImageColourSpace has been simplified. Instad of a container with Profile_Ref and Profile_Name the color space can now be noted just as Image/ColorSpace</li>
                </ul>
              </div>

              <div id="references" class="scrollsection">
                <h3>References</h3>
                <ul class="collection">
                  <li class="collection-item">The element Reference/CitationDetail was renamed to Reference/Details</li>
                  <li class="collection-item">The element Reference/ReferenceGUID was renamed to Reference/GUID</li>
                  <li class="collection-item">The element Reference/DOI was removed. DOIs are external identifiers (that are resolvable) and should therefore be mapped as Reference/ResourceURIs/ResourceURI</li>
                  <li class="collection-item">The element Reference/TitleCitation was renamed to Reference/Text</li>
                  <li class="collection-item">The element Reference/URI was renamed to Reference/WebsiteURL . Though documentation of the previous URI element stated that it was meant as a URL for the reference, it is possible that it has been used to actually note an external identifier of the reference (other than the DOI which had its own element), so in cases it might be required to map the content to  Reference/ResourceURIs/ResourceURI instead of Reference/WebsiteURL</li>
                </ul>
              </div>

              <div id="unit" class="scrollsection">
                <h3>Unit</h3>
                <ul class="collection">
                  <li class="collection-item">A new element FieldNoteReferences was created to add References that were used during field notes. </li>
                  <li class="collection-item">CollectorsFieldNumber has proved to be problematic, as two collectors could have different field numbers for the same unit that they collected together. To solve this issue, a new element FieldNumbers was introduced which can contain multiple FieldNumber elements each of which has an ID (the field number itself) and a CollectorName which is supposed to be the Full Name of one of the collectors mentioned as Gathering/GatheringAgents</li>
                  <li class="collection-item">HerbariumUnit/LoadIdentifier has been renamed to HerbariumUnit/LoanID </li>
                  <li class="collection-item">HerbariumUnit/LoadSequenceNo has been renamed to HerbariumUnit/LoanSequenceNumber</li>
                  <li class="collection-item">Unit/LastEditor is now a full contact</li>
                  <li class="collection-item">Unit/MultiMediaObjects/MultiMediaObject has been renamed to Unit/MultimediaObjects/MultimediaObject</li>
                  <li class="collection-item">Unit/UnitIDNumeric has been renamed to UnitI/NumericID</li>
                  <li class="collection-item">Unit/ObservationUnit/ObservationUnitIdentifiers/ObservationUnitIdentifier has been renamed to Unit/ObservationUnit/ObservationUnitIDs/ObservationUnitID</li>
                  <li class="collection-item">Unit/RecordURI is now expressed as Unit/ResourceURIs/ResourceURI</li>
                  <li class="collection-item">Unit/SampleType has been removed</li>
                  <li class="collection-item">Unit/PlantGeneticResourcesUnit/AccessionNames/AccessionNameText has been moved out of the container for the repeatable element AccesionName and is now located at Unit/PlantGeneticResourcesUnit/AccessionNameText</li>
                  <li class="collection-item">Unit/PlantGeneticResourcesUnit/DecodedDonorInstitute has been renamed to Unit/PlantGeneticResourcesUnit/DecodedGatheringInstitut</li>
                  <li class="collection-item">Unit/Sequences/Sequence/URI has been renamed to Unit/Sequences/Sequence/DirectAccessURL</li>
                  <li class="collection-item">Unit/Sequences/Sequence/ID-in-Database has been renamed to Unit/Sequences/Sequence/ID</li>
                  <li class="collection-item">Unit/UnitExtension is now repeatable within a container: Unit/UnitExtensions/UnitExtension</li>
                </ul>
              </div>

              <div id="identification" class="scrollsection">
                <h3>Identification</h3>
                <ul class="collection">
                  <li class="collection-item">The text element Unit/Identifications/IdentificationHistory has been moved out of the container for the repeatable Identification and sits now at Unit/ IdentificationHistory (after the Identifications element)</li>
                  <li class="collection-item">The Element Unit/Identifications/Identification/Identifiers/IdentifierRole has been moved out of the Identifiers container for the repeatable element Identifier and sits now at Unit/Identifications/Identification/IdentifierRole</li>
                  <li class="collection-item">Identifier is now a full contact instead of just a combination of PersonName and Organisation, which now allows for Addresses, EmailAddresses, TelephoneNumbers, Roles and ResourceURIs for the Identifier to be specified.</li>
                  <li class="collection-item">Identification/NonFlag has been renamed to Identification/NegativeIdentificationFlag</li>
                  <li class="collection-item">TaxonIdentified/InformatlNameString and TaxonIdentified/FullScientificNameString have been renamed to TaxonIdentified/InformatlName and TaxonIdentified/FullScientificName respectively. </li>
                </ul>
              </div>

              <div id="gathering" class="scrollsection">
                <h3>Gathering</h3>
                <ul class="collection">
                  <li class="collection-item">Aspect is now of type MeasurementAndFact. Depending on which element was used, both the previous Aspect/CompasBearing and Aspect/Ordination are supposed to be mapped to MeasurementOrFactAtomized/LowerValue or alternative to MeasurementOrFactText, combined with the previous Aspect/Text</li>
                  <li class="collection-item">SiteCoordinateSets/SiteCoordinatSet was renamed to CoordinateSets/CoordinateSet</li>
                  <li class="collection-item">A new Element ESPGID was introduced to CoordinateSet, as the ESPG IDs have become the defacto standard of identifying coordinate datums and reference systems, which also allows for better automated transformation of coordinates.</li>
                  <li class="collection-item">The element GeoreferenceSources for SiteCoordinateSets now has become a full repeatable reference element. </li>
                  <li class="collection-item">CountryNameDerived was been removed, instead a new element DerivedFlag was introduced to CountryName, to mark names that have been derived. This way both kinds of country names can be accessed/displayed using the same Path. </li>
                  <li class="collection-item">AreaDetail has been renamed to Detail</li>
                  <li class="collection-item">Gathering/Agents/GatheringAgent has been renamed to Gathering/GatheringAgents/GatheringAgent</li>
                  <li class="collection-item">The attribute primarycollector for GatheringAgent has been removed. To mark the primary collector, the gathering agent should have the attribute sequence (which already existed) with the value 1.</li>
                  <li class="collection-item">The element Gathering/Agents/GatheringAgentsText was moved to Gathering/ GatheringAgentsText , to have container for the repeatable element GatheringAgent only . This element is to express the gathering agents if they are only available in an concatenated format and it is not possible to separate them into individual collectors. </li>
                  <li class="collection-item">Gathering/Code has been renamed to Gathering/ID</li>
                  <li class="collection-item">Gathering/SiteImages/SiteImage has been renamed to Gathering/MultimediaObject/MultimediaObject</li>
                  <li class="collection-item">The element Gathering/NamedAreas/NamedArea/DataSource has now been replaced with a full reference element.</li>
                  <li class="collection-item">The element Gathering/NearNamedPlaces/NamedPlaceRelation has now been renamed to Gathering/NamedPlaceRelations/NamedPlaceRelation</li>
                  <li class="collection-item">The element Gathering/SiteMeasurementsOrFacts/SiteMeasurementOrFact has been renamed Gathering/OtherMeasurementsOrFacts/OtherMeasurementOrFact to express that the more commonly used Altitude, Aspect, Depth and Height are also MeasurementsOrFacts</li>
                  <li class="collection-item">The three elements for the stratigraphic terms (BiostratigraphicTerm, ChronostratigraphicTerm and LithostratigraphicTerm) now have a Source element (type reference), instead of SourceName and SourceVersion</li>
                  <li class="collection-item">Gathering/Synecology/AssociatedTaxa/TaxonIdentified has been renamed to Gathering/Synecology/AssociatedTaxa/AssociatedTaxon, while still being of type TaxonIdentified</li>
                </ul>
              </div>

              <div id="specimen" class="scrollsection">
                <h3>SpecimenUnit</h3>
                <ul class="collection">
                  <li class="collection-item">Unit/SpecimenUnit/LoanRestrictions/BlockedAsReferenceOnly has been removed. Such cases should be documented using Unit/SpecimenUnit/LoanRestrictions/LoanConditions</li>
                  <li class="collection-item">Unit/SpecimenUnit/Preparations/Preparation/PreparationProcess has been renamed to Unit/SpecimenUnit/Preparations/Preparation/PreparationMethod</li>
                  <li class="collection-item">Preparation now has additional elements for References, SampleDesignations,SampleSize and Sieving. </li>
                  <li class="collection-item">Unit/SpecimenUnit/Preparations/PreparationsText has been moved out of the container for the repeatable element to Unit/SpecimenUnit/PreparationsText</li>
                  <li class="collection-item">The element Unit/SpecimenUnit/History has been removed, all containing elements are now part of SpecimenUnit: Unit/SpecimenUnit/PreviousUnits and Unit/SpecimenUnit/PreviousUnitsText</li>
                  <li class="collection-item">Unit/SpecimenUnit now has an element SpecimenMeasurementsOrFacts</li>
                </ul>
              </div>

              <div id="annotation" class="scrollsection">
                <h3>Annotation</h3>
                <ul class="collection">
                  <li class="collection-item">Unit/EAnnotations was renamed to Unit/Annotations </li>
                  <li class="collection-item">Annotation/Annotator is now a full contact instead of just the name</li>
                  <li class="collection-item">Annotation/Date is now a full date element, instead of just a text element</li>
                </ul>
              </div>

              <div id="culture" class="scrollsection">
                <h3>CultureCollectionUnit</h3>
                <ul class="collection">
                  <li class="collection-item">GrowthConditionsAtomized now has elements for MeasurementsAndFacts and References</li>
                </ul>
              </div>

              <div id="other" class="scrollsection">
                <h3>Other</h3>
                <ul class="collection">
                  <li class="collection-item">More consistent use of format independent text fields. If elements have an atomized way of expressing a value, there is now usually also way to express it in an unformatted way, e.g. /DataSets/DataSet/Metadata/Version/VersionText instead of Version/Major and Version/Minor</li>
                  <li class="collection-item">In order to better link to external concepts a lot more elements now have the element ResourceURI, sometimes repeatable in a container.
                  <ul class="collection">
                    <li class="collection-item">E.e. Unit/Associations/Association</li>
                    <li class="collection-item">DataSet/ResourceURI</li>
                  </ul></li>
                  <li class="collection-item">/DataSets/DataSet/DataCenter  to name the datacenter that is providing the dataset on a technical level. This might be different from the Technical Contact (which could be a person responsible from the datacenter) or the ContentContact or Owner.</li>   
                </ul>
              </div>
            </div>
            <div id="mapping" class="scrollsection">
              <div class="section">
                <h4>ABCD 2.06 to ABCD 3.0 Mapping</h4>
                <p>The table below shows the mapping of ABCD 2.06 Xpaths to ABCD 3.0 Xpaths.</p>
              </div> 
              <div class="section">       
                <div class="mapping-search">
                  <div class="search-wrapper"><input type="text" v-model="mappingSearchInput" placeholder="Search for Mappings"><i class="material-icons">search</i></div>
                </div>
              </div>
              <div class="section">
                <table class="highlight responsive-table" style="word-break: break-word;">
                  <thead>
                    <tr><td></td><td>ABCD 2.06</td><td>ABCD 3.0</td></tr>
                  </thead>    
                  <tbody>
                    <tr v-for="mapping in filteredMappings"><td width="11%"><span class="new badge" v-bind:class="(mapping.status == 'added') ? 'green darken-3' : (mapping.status == 'removed') ? 'red darken-3' : (mapping.status == 'renamed') ? 'yellow darken-3' : 'grey'" v-bind:data-badge-caption="mapping.status"></span></td><td width="43.5%">{{ mapping.abcd2 }}</td><td width="43.5%">{{ mapping.abcd3 }}</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="col show-on-large xl3">
            <div class="toc-wrapper pushpin" data-target="main-app">
              <ul class="section table-of-contents">
                <li><a href="#simplification">Simplification</a></li>
                <li><a href="#renamed">Elements Renamed</a></li>
                <li><a href="#common">Commonly used Elements</a></li>
                <li><a href="#spelling">Spelling</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="#legal">LegalStatements</a></li>
                <li><a href="#urli">URI and URL</a></li>
                <li><a href="#date">Date</a></li>
                <li><a href="#multimedia">MultimediaObject</a></li>
                <li><a href="#references">References</a></li>
                <li><a href="#unit">Unit</a></li>
                <li><a href="#identification">Identification</a></li>
                <li><a href="#gathering">Gathering</a></li>
                <li><a href="#specimen">SpecimenUnit</a></li>
                <li><a href="#annotation">Annotation</a></li>
                <li><a href="#culture">CultureCollectionUnit</a></li>
                <li><a href="#other">Other</a></li>
                <li><a href="#mapping">Mapping</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script type="text/javascript" src="/assets/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/vue/vue.min.js"></script>
    <script type="text/javascript" src="/assets/materialize/js/materialize.min.js"></script>
    <script type="text/javascript" src="/assets/fuse/fuse.min.js"></script>
    <script type="text/javascript" src="/assets/lodash/lodash.js"></script>
    <script type="text/javascript" src="/assets/custom/js/navigation.js"></script>
    <script>
      new Vue({
        el: '#main-app',
        created(){
          this.debouncedMappingSearch = _.debounce(this.mappingSearch, 500);
          this.getMappings(); 
        },
        mounted() { 
          var options = {
            shouldSort: true,
            threshold: 0.6,
            location: 0,
            distance: 100,
            maxPatternLength: 32,
            minMatchCharLength: 3,
            keys: [
              "abcd2",
              "abcd3"
            ]
          };

          this.fuse = new Fuse(this.mappings, options);
          this.filteredMappings = this.mappings;
        },
        watch: {
          mappingSearchInput: function() {
            this.debouncedMappingSearch()
          }
        },
        updated(){
            console.log(this.mappings[0]);
        },
        methods: {
          getMappings() {
            var vinstance = this;
            $.getJSON('/xml/documentation/changes/ABCD2to3Mapping.json', (json) => {
              $.each(json.mappings, function(key, value){
                  vinstance.mappings.push(value);
              });
            });
          },
          mappingSearch(){
            if (this.mappingSearchInput.trim() === '')
              this.filteredMappings = this.mappings;
            else
              this.filteredMappings = this.fuse.search(this.mappingSearchInput.trim());
          }
        },
        data: {
          fuse: null,
          mappingSearchInput: '',
          mappings: [],
          filteredMappings: []
        }
      });
    </script>
  </body>
</html>